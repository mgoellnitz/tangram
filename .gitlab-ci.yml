image: dominikhastrich/java-gitlab-cd

stages:
  - modules

build_modules:
  stage: modules
  script: 
  - gradle jacocoTestReport jacocoCombinedReport coveralls build
  - bash <(curl -s https://codecov.io/bash)
  - gradle generatePomFileForMavenJavaPublication artifactoryPublish
  - gradle versionEyeUpdate
  artifacts:
    paths:
    - */build/libs/*
    expire_in: 5 days
    name: ${CI_BUILD_STAGE}
