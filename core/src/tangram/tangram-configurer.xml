<?xml version="1.0" encoding="utf-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

	<context:component-scan base-package="org.tangram" />

	<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		<property name="locations">
			<list>
				<value>classpath*:/tangram/*.properties</value>
				<value>/WEB-INF/tangram/*.properties</value>
			</list>
		</property>
	</bean>

	<bean id="classRepository" class="org.tangram.logic.ClassRepository">
	</bean>

	<bean id="modelAndViewFactory" class="org.tangram.view.GroovyModelAndViewFactory" />

	<bean id="linkFactory" class="org.tangram.view.link.GenericLinkFactory">
		<property name="dispatcherPath" value="${spring.dispatcher.servlet.path}" />
	</bean>

	<bean id="handlerMapping" class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
		<property name="order" value="10" />
		<property name="interceptors" ref="interceptors" />
	</bean>

	<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="mappings">
			<value>
				/**=metaController
			</value>
		</property>
		<property name="order" value="100" />
		<property name="interceptors" ref="interceptors"/>
	</bean>

	<bean id="plainJspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
		<property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
	</bean>

	<bean id="jspViewResolver" class="org.tangram.view.ModelAwareInternalResourceViewResolver">
		<property name="delegate" ref="plainJspViewResolver" />
		<property name="order" value="65435" />
		<property name="prefix" value="/WEB-INF/view/jsp/" />
		<property name="suffix" value=".jsp" />
		<property name="activateCaching" value="true" />
	</bean>

	<bean id="httpHeaderDateFormat" class="java.text.SimpleDateFormat">
		<constructor-arg>
			<value type="java.lang.String">EEE, dd MMM yyyy HH:mm:ss z</value>
		</constructor-arg>
	</bean>

	<bean id="viewSettings" class="java.util.HashMap">
		<constructor-arg>
			<map>
				<entry key="cssCacheTime" value="${css.cache.time}" />
				<entry key="jsCacheTime" value="${js.cache.time}" />
				<!--  not used by tangram itself! -->
				<entry key="imageCacheTime" value="${image.cache.time}" />
			</map>
		</constructor-arg>
	</bean>

</beans>
